<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{ :: body}, 'Download')}">
<body>
<br>
<div class="row justify-content-md-center">
  <div class="col-sm-12">
    <form action="#" th:action="@{/}" method="post">
      <input type="hidden" id="periodId" name="periodId" th:value="${periodId}"/>
      <table class="table table-responsive-sm table-bordered">
        <thead class="thead-dark">
        <tr>
          <th class="text-center">ทั้งหมด</th>
          <th class="text-center">แบ่งจำนวนเงินขั้นต่ำ</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td class="text-center"><a th:href="@{download/full/} + ${periodId}" class="btn btn-success">ดาวน์โหลด</a><br></td>
          <td>
            <div class="row">
              <div class="col-sm-3">
                <input type="number" id="money" name="money" class="form-control text-right" value="" onchange="chkInteger()">
              </div>
              <div class="col-sm-9">
                <button type="button" class="btn btn-success" onclick="download()">ดาวน์โหลด</button>
              </div>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
      <br>
      <a th:href="@{/}" class="btn btn-danger">ย้อนกลับ</a>
    </form>
  </div>
</div>
<script>
  function download() {
    let $money = $('#money');
    if ($money.val() !== '' && Number($money.val()) > 0) {
      window.open('download/option/' + $('#periodId').val() + '/' + $money.val() , '_self');
    } else {
      $money.focus();
      alert('กรุณาใส่จำนวนเงินให้มากกว่า 0');
    }
  }
</script>
</body>
</html>